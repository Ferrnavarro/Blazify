@page "/top-artists"

@inject State.AppState AppState

<div class="top-history">
    <ListPage Title="Top Artists" ImageUrl="https://localhost:44374/img/top-artists.jpg">
        <div>
            <TimeRangeSelector OnChange="OnChangeTimeRange"></TimeRangeSelector>
            @foreach (var artist in AppState.TopArtists)
            {
                <TopHistoryArtist Artist="@artist" />
            }
            
        </div>
    </ListPage>
</div>

@code {

    protected override async Task OnInitializedAsync()
    {
        await AppState.InitiliazeTopArtistss();

        AppState.SetTopArtists(SpotifyAPI.Web.PersonalizationTopRequest.TimeRange.LongTerm);
    }

    public void OnChangeTimeRange(SpotifyAPI.Web.PersonalizationTopRequest.TimeRange timeRange)
    {
        AppState.SetTopArtists(timeRange);
    }
}


